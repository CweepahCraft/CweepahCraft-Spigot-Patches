From 64f982caace004b166f325d5c3d8aeaaae534dcc Mon Sep 17 00:00:00 2001
From: Jacob Martin <jjm_223@hotmail.com>
Date: Tue, 27 Dec 2016 18:52:30 -0600
Subject: [PATCH 5/9] Fix piston dupe glitch.

---
 src/main/java/net/minecraft/server/BlockPiston.java | 10 +---------
 1 file changed, 1 insertion(+), 9 deletions(-)

diff --git a/src/main/java/net/minecraft/server/BlockPiston.java b/src/main/java/net/minecraft/server/BlockPiston.java
index 6a4c806..c647b46 100644
--- a/src/main/java/net/minecraft/server/BlockPiston.java
+++ b/src/main/java/net/minecraft/server/BlockPiston.java
@@ -286,14 +286,6 @@ public class BlockPiston extends BlockDirectional {
             return false;
         } else {
             List list = pistonextendschecker.getMovedBlocks();
-            ArrayList arraylist = Lists.newArrayList();
-
-            for (int i = 0; i < list.size(); ++i) {
-                BlockPosition blockposition1 = (BlockPosition) list.get(i);
-
-                arraylist.add(world.getType(blockposition1).b((IBlockAccess) world, blockposition1));
-            }
-
             List list1 = pistonextendschecker.getBrokenBlocks();
             int j = list.size() + list1.size();
             IBlockData[] aiblockdata = new IBlockData[j];
@@ -360,7 +352,7 @@ public class BlockPiston extends BlockDirectional {
                 world.setTypeAndData(blockposition2, Blocks.AIR.getBlockData(), 2);
                 blockposition2 = blockposition2.shift(enumdirection1);
                 world.setTypeAndData(blockposition2, Blocks.PISTON_EXTENSION.getBlockData().set(BlockPiston.FACING, enumdirection), 4);
-                world.setTileEntity(blockposition2, BlockPistonMoving.a((IBlockData) arraylist.get(k), enumdirection, flag, false));
+                world.setTileEntity(blockposition2, BlockPistonMoving.a(iblockdata, enumdirection, flag, false));
                 --j;
                 aiblockdata[j] = iblockdata;
             }
-- 
2.9.3

